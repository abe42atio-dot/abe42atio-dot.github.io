<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Pro Strategic Bubble & Video Planner</title>
<style>
  :root {
    --p1: #4facfe; --p2: #43e97b; --p3: #fa709a; --p4: #f6d365; --p5: #a18cd1;
    --bg: #f0f2f5;
  }
  body { font-family: 'Hiragino Sans', sans-serif; margin: 0; background: var(--bg); color: #333; touch-action: manipulation; }

  /* --- Dashboard (Folders & Hierarchy) --- */
  #dashboard { padding: 40px 20px; max-width: 1000px; margin: 0 auto; }
  .dash-header { text-align: center; margin-bottom: 40px; }
  
  .folder-container { background: #fff; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); overflow: hidden; border-left: 8px solid var(--p1); }
  .folder-header { padding: 15px 25px; display: flex; align-items: center; cursor: pointer; background: #fafbfc; transition: 0.2s; }
  .folder-header:hover { background: #f1f5f9; }
  .folder-icon { font-size: 24px; margin-right: 15px; }
  .folder-name { flex-grow: 1; font-weight: bold; font-size: 18px; outline: none; }
  .folder-controls { display: flex; align-items: center; gap: 10px; }
  
  .color-picker { width: 24px; height: 24px; border-radius: 50%; border: 2px solid #fff; box-shadow: 0 0 0 1px #ddd; cursor: pointer; padding: 0; }
  
  .project-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; padding: 20px; background: #fff; border-top: 1px solid #eee; }
  .project-card { 
    background: #f8fafc; padding: 15px; border-radius: 12px; border: 1px solid #e2e8f0; cursor: pointer; position: relative; transition: 0.3s;
  }
  .project-card:hover { transform: translateY(-3px); border-color: var(--p1); background: #fff; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
  .delete-item { color: #ccc; border: none; background: none; cursor: pointer; font-size: 16px; }
  .delete-item:hover { color: #ff4d4d; }

  .add-btn-main { background: #333; color: #fff; border: none; padding: 12px 25px; border-radius: 50px; font-weight: bold; cursor: pointer; font-size: 14px; margin-bottom: 20px; }
  .add-project-in-folder { background: #eee; border: 2px dashed #ccc; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: #888; font-weight: bold; cursor: pointer; min-height: 80px; }

  /* --- Editor --- */
  #editor { display: none; padding: 10px; }
  .page { width: 210mm; min-height: 297mm; background: #fff; padding: 10mm; margin: 0 auto; box-shadow: 0 0 50px rgba(0,0,0,0.15); display: flex; flex-direction: column; gap: 15px; border-radius: 5px; position: relative; }

  .canvas-section { position: relative; height: 500px; background: #fcfdfe; border: 1px solid #eee; border-radius: 20px; overflow: hidden; }
  .center-line { position: absolute; left: 50%; top: 0; bottom: 0; border-left: 2px dashed #ddd; z-index: 1; }

  .parent-bubble {
    position: absolute; border-radius: 50%; border: 3px solid; 
    background: rgba(255,255,255,0.9); z-index: 10; cursor: grab;
    min-width: 150px; min-height: 150px; display: flex; align-items: center; justify-content: center;
  }
  .bubble-title { position: absolute; top: -22px; font-size: 11px; font-weight: bold; white-space: nowrap; }

  .child-container { position: absolute; display: flex; flex-direction: column; align-items: center; z-index: 20; transition: left 0.3s ease, top 0.3s ease; }
  .child-label { font-size: 8px; font-weight: bold; color: #888; margin-bottom: 2px; outline: none; border-bottom: 1px dashed transparent; }
  .child-bubble {
    width: 55px; height: 55px; border-radius: 50%; background: #fff; border: 1.5px solid #ddd;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08); cursor: move; display: flex; align-items: center; justify-content: center; position: relative;
  }
  .child-text { font-size: 9px; width: 85%; text-align: center; border: none; outline: none; background: transparent; font-weight: 500; }

  .resize-handle {
    position: absolute; right: -8px; bottom: -8px; width: 24px; height: 24px;
    background: #fff; border: 2px solid #cbd5e0; border-radius: 50%; cursor: nwse-resize; z-index: 30;
    display: flex; align-items: center; justify-content: center;
  }
  .resize-handle::after { content: "â†˜"; font-size: 12px; color: #666; }

  .quick-add-btn { 
    position: absolute; bottom: -8px; left: -8px; width: 24px; height: 24px; 
    background: #eee; border-radius: 50%; border: 2px solid #ddd; cursor: pointer; 
    font-size: 18px; color: #666; display: flex; align-items: center; justify-content: center; 
    opacity: 0.8; transition: 0.2s; z-index: 40; 
  }

  .section-title { font-size: 11px; font-weight: bold; color: #444; border-left: 4px solid #333; padding-left: 8px; margin: 10px 0 5px; }
  table { width: 100%; border-collapse: separate; border-spacing: 2px; font-size: 9px; }
  th { background: #f8fafc; padding: 6px; border-radius: 4px; color: #64748b; font-weight: 600; text-align: center; }
  td { background: #fff; border: 1px solid #f1f5f9; padding: 5px; border-radius: 4px; outline: none; }

  .flow-container { display: flex; gap: 8px; }
  .flow-card { flex: 1; border-top: 5px solid #eee; background: #fff; padding: 10px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.03); }
  .flow-input { font-size: 9px; min-height: 40px; margin-top: 5px; padding: 4px; outline: none; background: #f9fafb; border-radius: 6px; }

  #toast { position: fixed; bottom: 20px; right: 20px; background: #333; color: #fff; padding: 10px 20px; border-radius: 30px; font-size: 12px; opacity: 0; transition: 0.5s; z-index: 1000; }
  .save-btn { background: #333; color: #fff; border: none; padding: 10px 25px; border-radius: 50px; font-weight: bold; cursor: pointer; font-size: 12px; margin-left: 10px; }

  @media print { .no-print { display: none !important; } .page { box-shadow: none; margin: 0; } }
</style>
</head>
<body>

<div id="toast">ä¿å­˜ã—ã¾ã—ãŸ</div>

<div id="dashboard">
  <div class="dash-header">
    <h1 style="font-weight: 900; font-size: 32px; margin-bottom: 10px;">Projects Strategy Canvas</h1>
    <button class="add-btn-main" onclick="createNewFolder()">ğŸ“ æ–°ã—ã„ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆ</button>
  </div>
  <div id="folder-list"></div>
</div>

<div id="editor">
  <div class="no-print" style="max-width:210mm; margin:10px auto; display:flex; justify-content:space-between; align-items:center;">
    <button onclick="goBackToDashboard()" style="cursor:pointer; background:none; border:none; color:var(--p1); font-weight:bold;">â† ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸æˆ»ã‚‹</button>
    <div><button class="save-btn" onclick="manualSave()">ğŸ’¾ ä¿å­˜</button><button class="save-btn" onclick="window.print()" style="background:#666;">PDFå‡ºåŠ›</button></div>
  </div>
  <div class="page">
    <h1 id="editable-title" contenteditable="true" style="text-align:center; outline:none; margin:0; font-size:22px;">Project Name</h1>
    <section class="canvas-section" id="canvas">
      <div class="center-line"></div>
      <div id="b-theme" class="parent-bubble" style="top:30px; left:50px; border-color:var(--p1);"><span class="bubble-title">èª²é¡Œåˆ†æ (THEME)</span><button class="quick-add-btn no-print" onclick="smartAdd('b-theme')">+</button><div class="resize-handle"></div></div>
      <div id="b-idea" class="parent-bubble" style="top:320px; left:60px; border-color:var(--p3);"><span class="bubble-title">è§£æ±ºç­– (IDEA)</span><button class="quick-add-btn no-print" onclick="smartAdd('b-idea')">+</button><div class="resize-handle"></div></div>
      <div id="b-action" class="parent-bubble" style="top:180px; left:160px; border-color:var(--p2);"><span class="bubble-title">æ¤œè¨¼ (ACTION)</span><button class="quick-add-btn no-print" onclick="smartAdd('b-action')">+</button><div class="resize-handle"></div></div>
      <div id="b-story" class="parent-bubble" style="top:30px; right:50px; border-color:var(--p5);"><span class="bubble-title">å°å…¥ (STORY)</span><button class="quick-add-btn no-print" onclick="smartAdd('b-story')">+</button><div class="resize-handle"></div></div>
      <div id="b-weapon" class="parent-bubble" style="top:320px; right:60px; border-color:var(--p4);"><span class="bubble-title">æ­¦å™¨ (WEAPON)</span><button class="quick-add-btn no-print" onclick="smartAdd('b-weapon')">+</button><div class="resize-handle"></div></div>
      <div id="b-scheme" class="parent-bubble" style="top:180px; right:160px; border-color:var(--p2);"><span class="bubble-title">ã‚¹ã‚­ãƒ¼ãƒ  (SCHEME)</span><button class="quick-add-btn no-print" onclick="smartAdd('b-scheme')">+</button><div class="resize-handle"></div></div>
    </section>
    <section class="flow-container"><div class="flow-card" style="border-color:var(--p1)"><span style="font-size:10px; font-weight:bold;">â‘  ã‚¿ã‚¤ãƒˆãƒ«</span><div class="flow-input" contenteditable="true"></div></div><div class="flow-card" style="border-color:var(--p5)"><span style="font-size:10px; font-weight:bold;">â‘¡ å°å…¥</span><div class="flow-input" contenteditable="true"></div></div><div class="flow-card" style="border-color:var(--p1)"><span style="font-size:10px; font-weight:bold;">â‘¢ ç¾çŠ¶åˆ†æ</span><div class="flow-input" contenteditable="true"></div></div><div class="flow-card" style="border-color:var(--p3)"><span style="font-size:10px; font-weight:bold;">â‘£ è§£æ±ºç­–</span><div class="flow-input" contenteditable="true"></div></div><div class="flow-card" style="border-color:var(--p2)"><span style="font-size:10px; font-weight:bold;">â‘¤ æ¤œè¨¼</span><div class="flow-input" contenteditable="true"></div></div><div class="flow-card" style="border-color:#333"><span style="font-size:10px; font-weight:bold;">â‘¥ ãƒ“ã‚¸ãƒ§ãƒ³</span><div class="flow-input" contenteditable="true"></div></div></section>
    <section><div class="section-title">ğŸ¬ å‹•ç”»åˆ¶ä½œå·¥ç¨‹è¡¨ (å…¨6è©±æ§‹æˆ)</div><table><thead><tr><th>è©±æ•°</th><th>ãƒ†ãƒ¼ãƒãƒ»æ’®å½±å†…å®¹</th><th>æ’®å½±æ™‚æœŸ</th><th>å ´æ‰€</th><th>å‡ºæ¼”è€…</th><th>æ©Ÿæ</th><th>å‚™è€ƒ</th></tr></thead><tbody id="video-tbody"></tbody></table></section>
    <section><div class="section-title">ğŸ“… å®Ÿè¡Œã‚¿ã‚¹ã‚¯ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</div><table><thead><tr><th style="width: 120px;">è¦ç´ </th><th>WHAT</th><th>WHO</th><th>WHEN</th><th>WHERE</th><th>WHY</th><th>HOW</th></tr></thead><tbody id="task-tbody"><tr><td style="font-weight:bold; border-left:4px solid var(--p1);">â‘ ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼</td><td contenteditable></td><td contenteditable></td><td contenteditable></td><td contenteditable></td><td contenteditable></td><td contenteditable></td></tr><tr><td style="font-weight:bold; border-left:4px solid var(--p4);">â‘¡ã‚¦ã‚¨ãƒãƒ³åˆ¶ä½œ</td><td contenteditable></td><td contenteditable></td><td contenteditable></td><td contenteditable></td><td contenteditable></td><td contenteditable></td></tr><tr><td style="font-weight:bold; border-left:4px solid var(--p2);">â‘¢ã‚¤ãƒ™ãƒ³ãƒˆ</td><td contenteditable></td><td contenteditable></td><td contenteditable></td><td contenteditable></td><td contenteditable></td><td contenteditable></td></tr></tbody></table></section>
  </div>
</div>

<script>
  let data = JSON.parse(localStorage.getItem('bubbleStrategyV14')) || { folders: [] };
  let currentId = null;
  let activeElem = null;
  let resizeElem = null;
  let offset = { x: 0, y: 0 };

  const masterConfig = {
    'b-theme': ['ç¤¾ä¼šå•é¡Œ', 'èª²é¡Œ'], 'b-action': ['ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼', 'ã‚¤ãƒ™ãƒ³ãƒˆ'], 'b-idea': ['1', '2', '3'],
    'b-story': ['å¥½ããªãƒ¢ãƒ', 'çµŒé¨“', 'å¤¢'], 'b-scheme': ['å”åŠ›è€…', 'ãƒ‘ãƒˆãƒ­ãƒ³', 'é¡§å®¢'], 'b-weapon': ['ã‚¹ã‚­ãƒ«', 'ã‚µãƒ¼ãƒ“ã‚¹', 'ã‚¢ãƒ—ãƒª', 'å•†å“']
  };

  const vt = document.getElementById('video-tbody');
  for(let i=1; i<=6; i++) {
    vt.innerHTML += `<tr><td style="text-align:center; font-weight:bold;">ç¬¬ ${i} è©±</td><td contenteditable></td><td contenteditable></td><td contenteditable></td><td contenteditable></td><td contenteditable></td><td contenteditable></td></tr>`;
  }

  function getClientCoords(e) {
    if (e.touches && e.touches.length > 0) return { x: e.touches[0].clientX, y: e.touches[0].clientY };
    return { x: e.clientX, y: e.clientY };
  }

  /* --- Dashboard Functions --- */
  function createNewFolder() {
    const folder = { id: Date.now().toString(), name: "æ–°ã—ã„ãƒ•ã‚©ãƒ«ãƒ€", color: "#4facfe", projects: [], isOpen: true };
    data.folders.push(folder);
    saveToStorage();
    renderDashboard();
  }

  function renderDashboard() {
    const list = document.getElementById('folder-list');
    list.innerHTML = '';
    data.folders.forEach(folder => {
      const container = document.createElement('div');
      container.className = 'folder-container';
      container.style.borderLeftColor = folder.color;
      
      container.innerHTML = `
        <div class="folder-header" onclick="toggleFolder('${folder.id}')">
          <span class="folder-icon">${folder.isOpen ? 'ğŸ“‚' : 'ğŸ“'}</span>
          <div class="folder-name" contenteditable="true" onclick="event.stopPropagation()" onblur="updateFolderName('${folder.id}', this.innerText)">${folder.name}</div>
          <div class="folder-controls" onclick="event.stopPropagation()">
            <input type="color" class="color-picker" value="${folder.color}" onchange="updateFolderColor('${folder.id}', this.value)">
            <button class="delete-item" onclick="deleteFolder('${folder.id}')">ğŸ—‘ï¸</button>
          </div>
        </div>
        <div class="project-grid" style="display: ${folder.isOpen ? 'grid' : 'none'}">
          ${folder.projects.map(p => `
            <div class="project-card" onclick="openProject('${p.id}')">
              <button class="delete-item" style="position:absolute; top:5px; right:5px;" onclick="deleteProject('${p.id}', event)">Ã—</button>
              <div style="font-weight:bold; font-size:14px; margin-top:10px;">${p.title}</div>
            </div>
          `).join('')}
          <div class="add-project-in-folder" onclick="createNewProject('${folder.id}')">+ æ–°è¦ä½œæˆ</div>
        </div>
      `;
      list.appendChild(container);
    });
  }

  function toggleFolder(id) {
    const f = data.folders.find(f => f.id === id);
    if(f) { f.isOpen = !f.isOpen; saveToStorage(); renderDashboard(); }
  }

  function updateFolderName(id, name) {
    const f = data.folders.find(f => f.id === id);
    if(f) { f.name = name; saveToStorage(); }
  }

  function updateFolderColor(id, color) {
    const f = data.folders.find(f => f.id === id);
    if(f) { f.color = color; saveToStorage(); renderDashboard(); }
  }

  function deleteFolder(id) {
    if(!confirm("ãƒ•ã‚©ãƒ«ãƒ€å†…ã®ã™ã¹ã¦ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚‚å‰Šé™¤ã•ã‚Œã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ")) return;
    data.folders = data.folders.filter(f => f.id !== id);
    saveToStorage(); renderDashboard();
  }

  function createNewProject(folderId) {
    const id = Date.now().toString();
    const newProj = { id, title: "æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ", bubbles: {} };
    const f = data.folders.find(f => f.id === folderId);
    f.projects.push(newProj);
    currentId = id;
    showEditor();
    resetEditorFields();
    Object.keys(masterConfig).forEach(bid => {
      masterConfig[bid].forEach(label => document.getElementById(bid).appendChild(createChildDOM(label, "", 55, 50, 50)));
      organizePolygon(bid);
    });
    saveEditorData();
  }

  /* --- Editor Core --- */
  function openProject(id) {
    currentId = id;
    let p = null;
    data.folders.forEach(f => { const found = f.projects.find(x => x.id === id); if(found) p = found; });
    if(!p) return;
    showEditor();
    document.getElementById('editable-title').innerText = p.title;
    document.querySelectorAll('.child-container').forEach(c => c.remove());
    Object.keys(p.bubbles || {}).forEach(bid => {
      const pb = document.getElementById(bid); const d = p.bubbles[bid];
      if(!pb || !d) return;
      pb.style.left = d.x; pb.style.top = d.y; pb.style.width = d.w; pb.style.height = d.h;
      (d.children || []).forEach(c => pb.appendChild(createChildDOM(c.label, c.text, c.size, c.x, c.y)));
    });
    if(p.flow) document.querySelectorAll('.flow-input').forEach((el, i) => el.innerText = p.flow[i] || "");
    if(p.video) document.querySelectorAll('#video-tbody td[contenteditable]').forEach((el, i) => el.innerText = p.video[i] || "");
    if(p.task) document.querySelectorAll('#task-tbody td[contenteditable]').forEach((el, i) => el.innerText = p.task[i] || "");
  }

  function deleteProject(id, e) {
    e.stopPropagation(); if(!confirm("ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")) return;
    data.folders.forEach(f => { f.projects = f.projects.filter(p => p.id !== id); });
    saveToStorage(); renderDashboard();
  }

  function saveEditorData() {
    if(!currentId) return;
    let p = null;
    data.folders.forEach(f => { const found = f.projects.find(x => x.id === currentId); if(found) p = found; });
    if(!p) return;
    p.title = document.getElementById('editable-title').innerText;
    p.bubbles = {};
    document.querySelectorAll('.parent-bubble').forEach(pb => {
      p.bubbles[pb.id] = {
        x: pb.style.left, y: pb.style.top, w: pb.style.width, h: pb.style.height,
        children: Array.from(pb.querySelectorAll('.child-container')).map(c => ({
          label: c.querySelector('.child-label').innerText,
          text: c.querySelector('.child-text').value,
          x: parseInt(c.style.left), y: parseInt(c.style.top),
          size: c.querySelector('.child-bubble').offsetWidth
        }))
      };
    });
    p.flow = Array.from(document.querySelectorAll('.flow-input')).map(i => i.innerText);
    p.video = Array.from(document.querySelectorAll('#video-tbody td[contenteditable]')).map(td => td.innerText);
    p.task = Array.from(document.querySelectorAll('#task-tbody td[contenteditable]')).map(td => td.innerText);
    saveToStorage();
  }

  /* --- Bubble Logic (Intact) --- */
  function organizePolygon(parentId) {
    const pb = document.getElementById(parentId);
    const children = Array.from(pb.querySelectorAll('.child-container'));
    const total = children.length; if (total === 0) return;
    const centerX = pb.offsetWidth / 2 - 27; const centerY = pb.offsetHeight / 2 - 27;
    const radius = total === 1 ? 0 : 45;
    children.forEach((child, i) => {
      const angle = (i * 2 * Math.PI / total) - (Math.PI / 2);
      child.style.left = (centerX + radius * Math.cos(angle)) + 'px';
      child.style.top = (centerY + radius * Math.sin(angle)) + 'px';
    });
  }

  function createChildDOM(label, text = "", size = 55, x = 0, y = 0) {
    const container = document.createElement('div'); container.className = 'child-container';
    container.innerHTML = `<div class="child-label" contenteditable="true">${label}</div><div class="child-bubble" style="width:${size}px; height:${size}px;"><input class="child-text" value="${text}"><div class="resize-handle"></div></div>`;
    container.style.left = x + 'px'; container.style.top = y + 'px';
    const startAction = (e) => {
      const coords = getClientCoords(e);
      if(e.target.classList.contains('resize-handle')) { resizeElem = container.querySelector('.child-bubble'); e.stopPropagation(); return; }
      if(e.target.hasAttribute('contenteditable') || e.target.tagName === 'INPUT') return;
      activeElem = container; e.stopPropagation();
      const r = container.getBoundingClientRect(); offset.x = coords.x - r.left; offset.y = coords.y - r.top;
      container.style.transition = 'none';
    };
    container.onmousedown = startAction; container.ontouchstart = startAction;
    return container;
  }

  function smartAdd(parentId) {
    const pb = document.getElementById(parentId);
    const existingLabels = Array.from(pb.querySelectorAll('.child-label')).map(el => el.innerText);
    const label = masterConfig[parentId].find(l => !existingLabels.includes(l)) || 'æ–°è¦';
    pb.appendChild(createChildDOM(label, "", 55, 50, 50));
    organizePolygon(parentId); saveEditorData();
  }

  const globalStart = (e) => {
    const coords = getClientCoords(e);
    if(e.target.classList.contains('resize-handle')) { resizeElem = e.target.parentElement; e.stopPropagation(); return; }
    const pb = e.target.closest('.parent-bubble');
    if(pb && !e.target.classList.contains('quick-add-btn')) { 
      activeElem = pb; const r = pb.getBoundingClientRect(); offset.x = coords.x - r.left; offset.y = coords.y - r.top; 
    }
  };
  document.onmousedown = globalStart; document.ontouchstart = globalStart;

  const globalMove = (e) => {
    if (!activeElem && !resizeElem) return;
    const coords = getClientCoords(e);
    if(resizeElem) {
      const r = resizeElem.getBoundingClientRect();
      resizeElem.style.width = resizeElem.style.height = Math.max(40, coords.x - r.left) + 'px';
      e.preventDefault(); return;
    }
    const canvas = document.getElementById('canvas').getBoundingClientRect();
    if(activeElem.classList.contains('child-container')) {
      const p = activeElem.parentElement.getBoundingClientRect();
      activeElem.style.left = (coords.x - p.left - offset.x) + 'px';
      activeElem.style.top = (coords.y - p.top - offset.y) + 'px';
    } else {
      activeElem.style.left = (coords.x - canvas.left - offset.x) + 'px';
      activeElem.style.top = (coords.y - canvas.top - offset.y) + 'px';
    }
    e.preventDefault();
  };
  document.onmousemove = globalMove; document.ontouchmove = globalMove;

  document.onmouseup = document.ontouchend = () => { if(activeElem || resizeElem) saveEditorData(); activeElem = null; resizeElem = null; };

  /* --- Utils --- */
  function saveToStorage() { localStorage.setItem('bubbleStrategyV14', JSON.stringify(data)); }
  function manualSave() { saveEditorData(); toast(); }
  function toast() { const t = document.getElementById('toast'); t.style.opacity = "1"; setTimeout(() => t.style.opacity = "0", 1500); }
  function showEditor() { document.getElementById('dashboard').style.display='none'; document.getElementById('editor').style.display='block'; }
  function showDashboard() { document.getElementById('dashboard').style.display='block'; document.getElementById('editor').style.display='none'; renderDashboard(); }
  function goBackToDashboard() { saveEditorData(); showDashboard(); }
  function resetEditorFields() {
    document.querySelectorAll('.flow-input').forEach(el => el.innerText = "");
    document.querySelectorAll('#video-tbody td[contenteditable]').forEach(el => el.innerText = "");
    document.querySelectorAll('#task-tbody td[contenteditable]').forEach(el => el.innerText = "");
    document.querySelectorAll('.child-container').forEach(c => c.remove());
  }

  window.onload = () => {
    if(data.folders.length === 0) createNewFolder(); // åˆæœŸè¡¨ç¤º
    renderDashboard();
  };
</script>
</body>
</html>

